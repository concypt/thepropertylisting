"use strict";(()=>{console.log("doc");var w=window.$memberstackDom,L=window.location.href.split("/").pop();w.getCurrentMember().then(({data:t})=>{t||C()});var C=()=>{let t=!0,e=document.referrer.split("/").pop(),o=document.querySelectorAll('[data-element="refferer-item"]');!o||(o.forEach(i=>{var n,r;let c=(n=i.querySelector('[data-element="refferer-name"]'))==null?void 0:n.textContent,a=(r=i.querySelector('[data-element="refferer-listing"]'))==null?void 0:r.textContent;c===e&&a===L&&(t=!1)}),t&&(window.location.href="/"))},b=D(21),S="https://"+window.location.hostname+"/fdiautvtnzxynmp/"+b,T=document.querySelector("#input-url"),v=document.querySelector("#input-share-slug"),E=document.querySelector("#input-listing");T&&(T.value=S);v&&(v.value=b);E&&L&&(E.value=L);function M(t){let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")}catch(o){console.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(e)}function q(t){if(!navigator.clipboard){M(t);return}navigator.clipboard.writeText(t).then(function(){},function(e){console.log(e)})}var m=document.querySelector("#btn-copy-url");m==null||m.addEventListener("click",function(t){q(S)});function D(t){let e="",o="abcdefghijklmnopqrstuvwxyz0123456789",i=o.length;for(let c=0;c<t;c++)e+=o.charAt(Math.floor(Math.random()*i));return e}async function H(t){let e="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+t+"?api_key=keyUxdcC40qxNrt1Y&view=Website+View";return await(await fetch(e)).json()}H(tableName).then(t=>x(t));var x=t=>{let e=t.records;e.forEach(s=>{s.fields["Unit/Lot"]&&(s.fields["Unit/Lot"]=parseInt(s.fields["Unit/Lot"])),s.fields.Price&&(s.fields.Price="$"+I(s.fields.Price))});let o=e[0].fields,i=Object.keys(o),c=["Unit/Lot","Price","Beds","Baths","Car Park","Status","Internal"];i.filter(s=>c.indexOf(s)===-1).forEach(s=>{s!=="Discount"&&c.push(s)});let n=document.querySelector('[data-element="table-row"]'),r=n==null?void 0:n.firstChild;n!=null&&n.innerHTML&&(n.innerHTML="");let f="grid-template-columns: ";c.forEach(s=>{let d=r==null?void 0:r.cloneNode(!0);d.textContent=s,d.setAttribute("data-sortelement",s),n==null||n.append(d),f=f+"1fr "}),document.querySelectorAll(".s-table-row-inner").forEach(s=>{s.setAttribute("style",f)});let l=document.querySelector('[data-element="stocklist-row"]');if(!l)return;let u=l==null?void 0:l.parentElement;if(!u)return;p(e,l,u,"Unit/Lot","asc",c),document.querySelectorAll(".s-table-head-item").forEach(s=>{s.addEventListener("click",d=>{var h,y,g;d.preventDefault(),s.classList.contains("selected")||((h=document.querySelector(".selected"))==null||h.classList.remove("asc"),(y=document.querySelector(".selected"))==null||y.classList.remove("desc"),(g=document.querySelector(".selected"))==null||g.classList.remove("selected")),s.classList.contains("desc")&&!s.classList.contains("first")?(p(e,l,u,s.dataset.sortelement,"asc",c),s.classList.add("selected","asc"),s.classList.remove("desc")):(p(e,l,u,s.dataset.sortelement,"desc",c),s.classList.contains("first")||(s.classList.add("selected","desc"),s.classList.remove("asc")))})})},p=(t,e,o,i,c,a)=>{o.innerHTML="";let n=!1,r=A(t,i,c);for(let f in r)if(r.hasOwnProperty(f)){let l=r[f].fields,u=k(e,l,a);if(!u)return;n&&u.classList.add("colored"),n=!n,o.append(u)}},k=(t,e,o)=>{let i=t.cloneNode(!0),c=i.querySelector(".s-table-cell-item"),a=c==null?void 0:c.parentElement;if(!!a&&!!c)return a.innerHTML="",i.innerHTML="",o.forEach(n=>{let r=c.cloneNode(!0);r.setAttribute("data-element",n),r.textContent=e[n],(n==="Internal"||n==="Land")&&(r.innerHTML=e[n]+"m <sup>2</sup>"),a.append(r)}),i.append(a),i},A=(t,e,o)=>{if(e==="Default")return t;let i=typeof t[0].fields[e];if(!i)return;let c=t.slice(0);return i==="number"?c.sort(function(a,n){let r;return o==="desc"?r=n.fields[e]-a.fields[e]:o==="asc"&&(r=a.fields[e]-n.fields[e]),r}):(i==="string"||i==="Default")&&c.sort(function(a,n){let r=a.fields[e].toLowerCase(),f=n.fields[e].toLowerCase(),l;return o==="desc"?l=f<r?-1:f>r?1:0:o==="asc"&&(l=r<f?-1:r>f?1:0),l}),c};function I(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}})();
