"use strict";(()=>{var b=window.$memberstackDom,p=window.location.href.split("/").pop();b.getCurrentMember().then(({data:n})=>{n||E()});var E=()=>{let n=!0,e=document.referrer.split("/").pop(),o=document.querySelectorAll('[data-element="refferer-item"]');!o||(o.forEach(i=>{var t,r;let c=(t=i.querySelector('[data-element="refferer-name"]'))==null?void 0:t.textContent,a=(r=i.querySelector('[data-element="refferer-listing"]'))==null?void 0:r.textContent;c===e&&a===p&&(n=!1)}),n&&(window.location.href="/"))};$(()=>{console.log("ready!!!");let n=C(21),e="https://"+window.location.hostname+"/fdiautvtnzxynmp/"+n,o=document.querySelector("#input-url"),i=document.querySelector("#input-share-slug"),c=document.querySelector("#input-listing");o&&(o.value=e),i&&(i.value=n),c&&p&&(c.value=p);let a=document.querySelector("#btn-copy-url");a==null||a.addEventListener("click",function(t){q(e)})});function T(n){let e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")}catch(o){console.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(e)}function q(n){if(!navigator.clipboard){T(n);return}navigator.clipboard.writeText(n).then(function(){},function(e){console.log(e)})}function C(n){let e="",o="abcdefghijklmnopqrstuvwxyz0123456789",i=o.length;for(let c=0;c<n;c++)e+=o.charAt(Math.floor(Math.random()*i));return e}async function v(n){let e="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+n+"?api_key=keyUxdcC40qxNrt1Y&view=Website+View";return await(await fetch(e)).json()}v(tableName).then(n=>M(n));var M=n=>{var L;if(n.error){(L=document.querySelector('[data-element="sl-table-wrapper"]'))==null||L.remove(),document.querySelector('[data-element="sl-title"]').textContent="Stocklist not found";return}let e=n.records;e.forEach(s=>{s.fields["Unit/Lot"]&&(s.fields["Unit/Lot"]=parseInt(s.fields["Unit/Lot"])),s.fields.Price&&(s.fields.Price="$"+H(s.fields.Price))});let o=e[0].fields,i=Object.keys(o),c=["Unit/Lot","Price","Beds","Baths","Car Park","Internal"],a=i.filter(s=>c.indexOf(s)===-1);a.push(a.splice(a.indexOf("Status"),1)[0]),console.log(a),a.forEach(s=>{s!=="Discount"&&c.push(s)});let t=document.querySelector('[data-element="table-row"]'),r=t==null?void 0:t.firstChild;t!=null&&t.innerHTML&&(t.innerHTML="");let d="grid-template-columns: ";c.forEach(s=>{let f=r==null?void 0:r.cloneNode(!0);f.textContent=s,f.setAttribute("data-sortelement",s),t==null||t.append(f),d=d+"1fr "}),document.querySelectorAll(".s-table-row-inner").forEach(s=>{s.setAttribute("style",d)});let l=document.querySelector('[data-element="stocklist-row"]');if(!l)return;let u=l==null?void 0:l.parentElement;if(!u)return;m(e,l,u,"Unit/Lot","asc",c),document.querySelectorAll(".s-table-head-item").forEach(s=>{s.addEventListener("click",f=>{var y,g,h;f.preventDefault(),s.classList.contains("selected")||((y=document.querySelector(".selected"))==null||y.classList.remove("asc"),(g=document.querySelector(".selected"))==null||g.classList.remove("desc"),(h=document.querySelector(".selected"))==null||h.classList.remove("selected")),s.classList.contains("desc")&&!s.classList.contains("first")?(m(e,l,u,s.dataset.sortelement,"asc",c),s.classList.add("selected","asc"),s.classList.remove("desc")):(m(e,l,u,s.dataset.sortelement,"desc",c),s.classList.contains("first")||(s.classList.add("selected","desc"),s.classList.remove("asc")))})})},m=(n,e,o,i,c,a)=>{o.innerHTML="";let t=!1,r=x(n,i,c);for(let d in r)if(r.hasOwnProperty(d)){let l=r[d].fields,u=w(e,l,a);if(!u)return;t&&u.classList.add("colored"),t=!t,o.append(u)}},w=(n,e,o)=>{let i=n.cloneNode(!0),c=i.querySelector(".s-table-cell-item"),a=c==null?void 0:c.parentElement;if(!!a&&!!c)return a.innerHTML="",i.innerHTML="",o.forEach(t=>{let r=c.cloneNode(!0);r.setAttribute("data-element",t),r.textContent=e[t],(t==="Internal"||t==="Land")&&(r.innerHTML=e[t]+"m <sup>2</sup>"),t==="Status"&&(console.log(e[t]),e[t]==="Sold"?r.classList.add("status-red"):e[t]==="Under Contract"?r.classList.add("status-orange"):e[t]==="Available"&&r.classList.add("status-green")),a.append(r)}),i.append(a),i},x=(n,e,o)=>{if(e==="Default")return n;let i=typeof n[0].fields[e];if(!i)return;let c=n.slice(0);return i==="number"?c.sort(function(a,t){let r;return o==="desc"?r=t.fields[e]-a.fields[e]:o==="asc"&&(r=a.fields[e]-t.fields[e]),r}):(i==="string"||i==="Default")&&c.sort(function(a,t){let r=a.fields[e].toLowerCase(),d=t.fields[e].toLowerCase(),l;return o==="desc"?l=d<r?-1:d>r?1:0:o==="asc"&&(l=r<d?-1:r>d?1:0),l}),c};function H(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var S;(S=document.querySelector("#btn-request-a-contract"))==null||S.addEventListener("click",n=>{var i;n.preventDefault();let e=(i=document.querySelector('[data-element="address"]'))==null?void 0:i.textContent;if(!e)return;let o="/request-a-contract?address="+encodeURIComponent(e);window.location.href=o});})();
