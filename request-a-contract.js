"use strict";(()=>{var u=document.querySelector('[data-element="Purchaser"]');u==null||u.addEventListener("change",n=>{n.preventDefault();let t=n.target.value,e=document.querySelector('[data-purchaser="Joint"]');t==="Joint"&&(e==null||e.classList.remove("hide")),t==="Single"&&(e==null||e.classList.add("hide"))});var m=document.querySelector('[data-element="Buying Entity Type"]');m==null||m.addEventListener("change",n=>{n.preventDefault();let t=n.target.value,e=document.querySelector('[data-element="Buying Entity Name"]');t!=="Named above"&&(e==null||e.classList.remove("hide")),(t==="Named above"||t==="")&&(e==null||e.classList.add("hide"))});var I=[];document.querySelectorAll('[data-element="listing-item"]').forEach(n=>{var o,a;let t=(o=n.querySelector('[data-element="listing-address"]'))==null?void 0:o.textContent,e=(a=n.querySelector('[data-element="listing-airtable"]'))==null?void 0:a.textContent,s={address:t,airtable:e};s&&I.push(s)});var y=new autoComplete({placeHolder:"Search for listing...",data:{src:I,keys:["address"],cache:!0},resultItem:{highlight:!0},events:{input:{selection:n=>{let t=n.detail.selection.value;y.input.value=t}}}}),B;(B=document.querySelector("#autoComplete"))==null||B.addEventListener("selection",function(n){let t=n.detail;y.input.blur();let e=t.selection.value[t.selection.key];y.input.value=e;let s=t.selection.value.airtable;H(s).then(o=>M(o))});async function H(n){let t="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+n+"?api_key=keyUxdcC40qxNrt1Y";return await(await fetch(t)).json()}var M=n=>{let t=document.querySelector('[data-element="AvailableUnits"]');if(!t)return;let e=t.options.length-1,s;for(s=e;s>=1;s--)t.remove(s);let o=n.records,a=[];o.forEach(c=>{let r="Unit "+c.fields["Unit/Lot"]+" - $"+U(c.fields.Price)+" / "+(c.fields.Land?c.fields.Land:"")+(c.fields.Land?"sqm / ":"")+c.fields.Beds+" / "+c.fields.Baths+" / "+c.fields["Car Park"];a.push(r)}),a.sort(J),a.forEach(c=>{let r=document.createElement("option");r.text=c+"",r.value=c+"",t==null||t.add(r)})},A="a95d779bec144d448ebcafccdec4ce61";function E(){let n=new AddyComplete(document.getElementById("main-address"));n.options.excludePostBox=!1,n.fields={address1:document.getElementById("main-address"),address2:document.getElementById("main-address2"),city:document.getElementById("main-city"),postcode:document.getElementById("main-postcode"),suburb:document.getElementById("main-suburb")}}(function(n,t){let e=n.createElement("script"),s="https://www.addysolutions.com/address-lookup/1.6.2/js/addy.min.js";e.src=s+"?loadcss=true&enableLocation=false&country=nz&nzKey="+A,e.type="text/javascript",e.async=1,e.onload=E,n.body.appendChild(e)})(document,window);var f=(n,t,e)=>{let s=n==null?void 0:n.cloneNode(!0),o=s.querySelector("span"),a=s.querySelector("input");if(!(!o||!a))return o.textContent=t.toString(),a.value=e.toString(),s},R=(n,t,e)=>{let s=t==null?void 0:t.parentElement;t==null||t.remove(),n.forEach((o,a,c)=>{var L,h,p,g,v,S,C,q;let r=o,l="Yes - "+((L=r.querySelector('[data-element="'+e+' Location"]'))==null?void 0:L.textContent)+(e!=="Lawyer"?" ":": ")+((h=r.querySelector('[data-element="'+e+' Name"]'))==null?void 0:h.textContent)+" at "+((p=r.querySelector('[data-element="'+e+' Firm"]'))==null?void 0:p.textContent)+" ("+((g=r.querySelector('[data-element="'+e+' Email"]'))==null?void 0:g.textContent)+" / "+((v=r.querySelector('[data-element="'+e+' Phone"]'))==null?void 0:v.textContent)+" )",d=((S=r.querySelector('[data-element="'+e+' Location"]'))==null?void 0:S.textContent)+": "+((C=r.querySelector('[data-element="'+e+' Name"]'))==null?void 0:C.textContent)+" at "+((q=r.querySelector('[data-element="'+e+' Firm"]'))==null?void 0:q.textContent);if(t){let w=f(t,l,d);if(w&&(s==null||s.append(w)),a===c.length-1){let i;e==="Lawyer"?i=f(t,"No - please fill in purchaser solicitors section below","Custom Lawyer"):i=f(t,"No - please fill in purchaser broker section below","Custom Broker"),i&&(s==null||s.append(i));let b=s==null?void 0:s.querySelector(".w-form-formradioinput:first-child");b&&(b.checked=!0)}}})},N=document.querySelectorAll('[data-element="Lawyer Item"]'),x=document.querySelector('[data-element="Lawyer Radio"]');x&&R(N,x,"Lawyer");var D=document.querySelectorAll('[data-element="Broker Item"]'),k=document.querySelector('[data-element="Broker Radio"]');k&&R(D,k,"Broker");document.addEventListener("click",function(n){var e,s,o,a;let t=n.target;t.classList.contains("lawyer-radio")&&(t.value==="Custom Lawyer"?(e=document.querySelector('[data-element="Custom Lawyer"]'))==null||e.classList.remove("hide"):(s=document.querySelector('[data-element="Custom Lawyer"]'))==null||s.classList.add("hide")),t.classList.contains("broker-radio")&&(t.value==="Custom Broker"?(o=document.querySelector('[data-element="Custom Broker"]'))==null||o.classList.remove("hide"):(a=document.querySelector('[data-element="Custom Broker"]'))==null||a.classList.add("hide"))});function U(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function J(n,t){var e=[],s=[];for(n.replace(/(\d+)|(\D+)/g,function(r,l,d){e.push([l||1/0,d||""])}),t.replace(/(\d+)|(\D+)/g,function(r,l,d){s.push([l||1/0,d||""])});e.length&&s.length;){var o=e.shift(),a=s.shift(),c=o[0]-a[0]||o[1].localeCompare(a[1]);if(c)return c}return e.length-s.length}})();
