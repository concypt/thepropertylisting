"use strict";(()=>{var u=document.querySelector('[data-element="Purchaser"]');u==null||u.addEventListener("change",n=>{n.preventDefault();let t=n.target.value,e=document.querySelector('[data-purchaser="Joint"]');t==="Joint"&&(e==null||e.classList.remove("hide")),t==="Single"&&(e==null||e.classList.add("hide"))});var m=document.querySelector('[data-element="Buying Entity Type"]');m==null||m.addEventListener("change",n=>{n.preventDefault();let t=n.target.value,e=document.querySelector('[data-element="Buying Entity Name"]');t!=="Named above"&&(e==null||e.classList.remove("hide")),(t==="Named above"||t==="")&&(e==null||e.classList.add("hide"))});var k=[];document.querySelectorAll(".property-list-item").forEach(n=>{n.textContent&&k.push(n.textContent)});var R=new autoComplete({placeHolder:"Search for listing...",data:{src:k,cache:!0},resultItem:{highlight:!0},events:{input:{selection:n=>{let t=n.detail.selection.value;R.input.value=t}}}}),b;(b=document.querySelector("#autoComplete"))==null||b.addEventListener("selection",function(n){let t=n.detail.selection.value;H(t).then(e=>M(e))});async function H(n){let t="https://api.airtable.com/v0/appWNf6XfqAR6n0oT/"+n+"?api_key=keyUxdcC40qxNrt1Y";return await(await fetch(t)).json()}var M=n=>{let t=document.querySelector('[data-element="AvailableUnits"]');if(!t)return;let e=t.options.length-1,o;for(o=e;o>=1;o--)t.remove(o);let r=n.records,c=[];r.forEach(s=>{let a="Unit "+s.fields["Unit/Lot"]+" - $"+U(s.fields.Price)+" / "+(s.fields.Land?s.fields.Land:"")+(s.fields.Land?"sqm / ":"")+s.fields.Beds+" / "+s.fields.Baths+" / "+s.fields["Car Park"];c.push(a)}),c.sort(J),console.log(c),c.forEach(s=>{let a=document.createElement("option");a.text=s+"",a.value=s+"",t==null||t.add(a)})},E="a95d779bec144d448ebcafccdec4ce61";function N(){let n=new AddyComplete(document.getElementById("main-address"));n.options.excludePostBox=!1,n.fields={address1:document.getElementById("main-address"),address2:document.getElementById("main-address2"),city:document.getElementById("main-city"),postcode:document.getElementById("main-postcode"),suburb:document.getElementById("main-suburb")}}(function(n,t){let e=n.createElement("script"),o="https://www.addysolutions.com/address-lookup/1.6.2/js/addy.min.js";e.src=o+"?loadcss=true&enableLocation=false&country=nz&nzKey="+E,e.type="text/javascript",e.async=1,e.onload=N,n.body.appendChild(e)})(document,window);var f=(n,t,e)=>{let o=n==null?void 0:n.cloneNode(!0),r=o.querySelector("span"),c=o.querySelector("input");if(!(!r||!c))return r.textContent=t.toString(),c.value=e.toString(),o},I=(n,t,e)=>{let o=t==null?void 0:t.parentElement;t==null||t.remove(),n.forEach((r,c,s)=>{var y,L,h,p,g,v,S,C;let a=r,l="Yes - "+((y=a.querySelector('[data-element="'+e+' Location"]'))==null?void 0:y.textContent)+(e!=="Lawyer"?" ":": ")+((L=a.querySelector('[data-element="'+e+' Name"]'))==null?void 0:L.textContent)+" at "+((h=a.querySelector('[data-element="'+e+' Firm"]'))==null?void 0:h.textContent)+" ("+((p=a.querySelector('[data-element="'+e+' Email"]'))==null?void 0:p.textContent)+" / "+((g=a.querySelector('[data-element="'+e+' Phone"]'))==null?void 0:g.textContent)+" )",d=((v=a.querySelector('[data-element="'+e+' Location"]'))==null?void 0:v.textContent)+": "+((S=a.querySelector('[data-element="'+e+' Name"]'))==null?void 0:S.textContent)+" at "+((C=a.querySelector('[data-element="'+e+' Firm"]'))==null?void 0:C.textContent);if(t){let q=f(t,l,d);if(q&&(o==null||o.append(q)),c===s.length-1){let i;e==="Lawyer"?i=f(t,"No - please fill in purchaser solicitors section below","Custom Lawyer"):i=f(t,"No - please fill in purchaser broker section below","Custom Broker"),i&&(o==null||o.append(i));let w=o==null?void 0:o.querySelector(".w-form-formradioinput:first-child");w&&(w.checked=!0)}}})},A=document.querySelectorAll('[data-element="Lawyer Item"]'),x=document.querySelector('[data-element="Lawyer Radio"]');x&&I(A,x,"Lawyer");var D=document.querySelectorAll('[data-element="Broker Item"]'),B=document.querySelector('[data-element="Broker Radio"]');B&&I(D,B,"Broker");document.addEventListener("click",function(n){var e,o,r,c;let t=n.target;t.classList.contains("lawyer-radio")&&(t.value==="Custom Lawyer"?(e=document.querySelector('[data-element="Custom Lawyer"]'))==null||e.classList.remove("hide"):(o=document.querySelector('[data-element="Custom Lawyer"]'))==null||o.classList.add("hide")),t.classList.contains("broker-radio")&&(t.value==="Custom Broker"?(r=document.querySelector('[data-element="Custom Broker"]'))==null||r.classList.remove("hide"):(c=document.querySelector('[data-element="Custom Broker"]'))==null||c.classList.add("hide"))});function U(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function J(n,t){var e=[],o=[];for(n.replace(/(\d+)|(\D+)/g,function(a,l,d){e.push([l||1/0,d||""])}),t.replace(/(\d+)|(\D+)/g,function(a,l,d){o.push([l||1/0,d||""])});e.length&&o.length;){var r=e.shift(),c=o.shift(),s=r[0]-c[0]||r[1].localeCompare(c[1]);if(s)return s}return e.length-o.length}})();
