"use strict";(()=>{window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsfilter",async r=>{let[n]=r,{listInstance:e}=n;if(!e)return;let c=C(e,"Completion");if(!c)return;let o=n.form.querySelector('[data-element="completion"]');if(!o)return;h(o,c);let t=[];for(let l=4e5;l<=15e5;l=l+1e5)t.push(l.toString());if(!t)return;let i=n.form.querySelector('[data-element="price-dropdown-min"]');if(!i)return;let s=n.form.querySelector('[data-element="price-dropdown-max"]');if(!s)return;h(i,t),h(s,t);let a=g(e,"criteria-beds","min-beds","max-beds");if(!a)return;let p=g(e,"criteria-baths","min-baths","max-baths");if(!p)return;let m=n.form.querySelector('[data-element="beds-filter"]');if(!m)return;let u=n.form.querySelector('[data-element="baths-filter"]');if(!u)return;let d=m.parentElement;if(!d)return;let b=u.parentElement;if(!b)return;m.remove(),u.remove();for(let l of a){let f=x(l,m);!f||d.append(f)}for(let l of p){let f=x(l,u);!f||b.append(f)}let L=e.items.map(l=>l.element);e.clearItems(),e.addItems(L),n.storeFiltersData();let S=document.querySelector("#min-price");if(!S)return;let E=document.querySelector("#max-price");if(!E)return;S.addEventListener("change",l=>{let f=l.target.value;!f||(console.log(f),document.querySelectorAll("#max-price option").forEach(T=>{T.style.display="block"}),document.querySelectorAll("#max-price option").forEach(T=>{Number(T.value)<=Number(f)&&(T.style.display="none")}),M())}),E.addEventListener("change",l=>{M()});let M=()=>{e.clearItems(),e.addItems(L);let l=y(e);!l||(e.clearItems(),e.addItems(l))}}]);var y=r=>{var o,t;let n=Number((o=document.querySelector("#min-price"))==null?void 0:o.value.replace(/,/g,""));if(!n)return;let e=Number((t=document.querySelector("#max-price"))==null?void 0:t.value.replace(/,/g,""));return e?r.items.filter(i=>{var p,m;let s=Number((p=i.element.querySelector('[data-element="min-price"]'))==null?void 0:p.innerText.replace(/,/g,""));if(!s)return;let a=Number((m=i.element.querySelector('[data-element="max-price"]'))==null?void 0:m.innerText.replace(/,/g,""));if(a){if(s>=n&&a<=e)return!0}else if(s>=n&&s<=e)return!0}).map(i=>i.element):void 0},v=(r,n)=>{let e=n.cloneNode(!0);return e.textContent=r,e.value=r,e},C=(r,n)=>{let e=[],c=r.items;if(!!r){for(let o of c){let t=o.element.querySelector('[fs-cmsfilter-field="'+n+'"]');!(t!=null&&t.innerText)||e.push(t.innerText)}if(!!e)return e}},h=(r,n)=>{let e=r.options[0];if(!e)return;let c=r.options.length-1,o;for(o=c;o>=1;o--)r.remove(o);let t=[];n.forEach(i=>{!t.includes(i)&&t.push(i)});for(let i of t){let s=v(i,e);!s||r.append(s)}},g=(r,n,e,c)=>{let o=r.items,t=[];if(!!r){for(let i of o){let s=i.element.querySelector('[data-element="'+e+'"]');if(!s)return;let a=parseInt(s.innerText),p=i.element.querySelector('[data-element="'+c+'"]');if(!p)return;let m=parseInt(p.innerText),u=[];m?(u=Array.from({length:m-a+1},(L,S)=>a+S),t.push(...u)):(u.push(a),t.push(...u));let d=i.element.querySelector('[data-element="'+n+'"]');if(!d)return;let b=d.parentElement;if(!b)return;d.remove();for(let L of u){let S=I(L,d);!S||b.append(S)}}if(t=t.filter((i,s,a)=>a.indexOf(i)===s),t=t.sort(function(i,s){return i-s}),!!t)return t}},I=(r,n)=>{let e=n.cloneNode(!0);return e.textContent=r.toString(),e},x=(r,n)=>{let e=n.cloneNode(!0),c=e.querySelector("span"),o=e.querySelector("input");if(!(!c||!o))return c.textContent=r.toString(),o.value=r.toString(),e};})();
