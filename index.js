"use strict";(()=>{window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsfilter",async t=>{let[n]=t,{listInstance:e}=n;if(!e)return;let c=w(e,"Completion");if(!c)return;let s=n.form.querySelector('[data-element="completion"]');if(!s)return;E(s,c);let r=[];for(let l=4e5;l<=15e5;l=l+1e5)r.push(l.toString());if(!r)return;let i=n.form.querySelector('[data-element="price-dropdown-min"]');if(!i)return;let o=n.form.querySelector('[data-element="price-dropdown-max"]');if(!o)return;E(i,r),E(o,r);let m=y(e,"criteria-beds","min-beds","max-beds");if(!m)return;let u=y(e,"criteria-baths","min-baths","max-baths");if(!u)return;let f=n.form.querySelector('[data-element="beds-filter"]');if(!f)return;let d=n.form.querySelector('[data-element="baths-filter"]');if(!d)return;let p=f.parentElement;if(!p)return;let S=d.parentElement;if(!S)return;f.remove(),d.remove();for(let l of m){let a=g(l,f);!a||p.append(a)}for(let l of u){let a=g(l,d);!a||S.append(a)}let b=e.items.map(l=>l.element);e.clearItems(),e.addItems(b),n.storeFiltersData();let L=document.querySelector("#min-price");if(!L)return;let T=document.querySelector("#max-price");if(!T)return;L.addEventListener("change",l=>{let a=l.target.value;!a||(console.log(a),document.querySelectorAll("#max-price option").forEach(h=>{h.style.display="block"}),document.querySelectorAll("#max-price option").forEach(h=>{Number(h.value)<=Number(a)&&(h.style.display="none")}),x())}),T.addEventListener("change",l=>{x()});let x=()=>{e.clearItems(),e.addItems(b);let l=C(e);!l||(e.clearItems(),e.addItems(l))};document.addEventListener("click",l=>{let a=l.target;!a||(a.classList.contains("checkbox-select-wrapper")?M(a):a.classList.contains("checkbox-select-text")?M(a.parentElement):v())})}]);var C=t=>{var s,r;let n=Number((s=document.querySelector("#min-price"))==null?void 0:s.value.replace(/,/g,""));if(!n)return;let e=Number((r=document.querySelector("#max-price"))==null?void 0:r.value.replace(/,/g,""));return e?t.items.filter(i=>{var u,f;let o=Number((u=i.element.querySelector('[data-element="min-price"]'))==null?void 0:u.innerText.replace(/,/g,""));if(!o)return;let m=Number((f=i.element.querySelector('[data-element="max-price"]'))==null?void 0:f.innerText.replace(/,/g,""));if(m){if(o>=n&&m<=e)return!0}else if(o>=n&&o<=e)return!0}).map(i=>i.element):void 0},q=(t,n)=>{let e=n.cloneNode(!0);return e.value=t,t.charAt(0)!=="Q"&&(t="$"+F(t)),e.textContent=t,e},w=(t,n)=>{let e=[],c=t.items;if(!!t){for(let s of c){let r=s.element.querySelector('[fs-cmsfilter-field="'+n+'"]');!(r!=null&&r.innerText)||e.push(r.innerText)}if(!!e)return e}},E=(t,n)=>{let e=t.options[0];if(!e)return;let c=t.options.length-1,s;for(s=c;s>=1;s--)t.remove(s);let r=[];n.forEach(i=>{!r.includes(i)&&r.push(i)}),console.log(r);for(let i of r){let o=q(i,e);!o||t.append(o)}},y=(t,n,e,c)=>{let s=t.items,r=[];if(!!t){for(let i of s){let o=i.element.querySelector('[data-element="'+e+'"]');if(!o)return;let m=parseInt(o.innerText),u=i.element.querySelector('[data-element="'+c+'"]');if(!u)return;let f=parseInt(u.innerText),d=[];f?(d=Array.from({length:f-m+1},(b,L)=>m+L),r.push(...d)):(d.push(m),r.push(...d));let p=i.element.querySelector('[data-element="'+n+'"]');if(!p)return;let S=p.parentElement;if(!S)return;p.remove();for(let b of d){let L=H(b,p);!L||S.append(L)}}if(r=r.filter((i,o,m)=>m.indexOf(i)===o),r=r.sort(function(i,o){return i-o}),!!r)return r}},H=(t,n)=>{let e=n.cloneNode(!0);return e.textContent=t.toString(),e},g=(t,n)=>{let e=n.cloneNode(!0),c=e.querySelector("span"),s=e.querySelector("input");if(!(!c||!s))return c.textContent=t.toString(),s.value=t.toString(),e},M=t=>{let{parentElement:n}=t,e=n==null?void 0:n.querySelector('[data-element="radio-options"]');e.classList.contains("hide")?(e.classList.remove("hide"),t.classList.add("enabled")):v()},v=()=>{document.querySelectorAll('[data-element="radio-options"]').forEach(t=>{t.classList.add("hide")}),document.querySelectorAll(".checkbox-select-wrapper").forEach(t=>{t.classList.remove("enabled")}),D()},D=async()=>{await I(100);let t=document.querySelectorAll('[data-element="radio-select-wrapper"]');!t||t.forEach(n=>{var o;let e=n.querySelector('[data-element="radio-select-text"]');if(!e)return;let c=(o=n.querySelector(".im-label strong"))==null?void 0:o.textContent;if(!c)return;let s="All "+c,r="";n.querySelectorAll(".fs-cmsfilter_active").forEach(m=>{var u;r+=(u=m.querySelector(".w-form-label"))==null?void 0:u.textContent,r+=", "}),r=r.trim();let i=r.length;i>0?e.textContent=r.substring(0,i-1):e.textContent=s})},I=t=>new Promise(n=>setTimeout(n,t)),F=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");})();
